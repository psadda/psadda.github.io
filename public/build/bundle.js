var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function i(t){t.forEach(n)}function a(t){return"function"==typeof t}function o(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function s(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function r(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function u(){return p(" ")}function d(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function f(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}let h;function m(t){h=t}const b=[],g=[],v=[],y=[],x=Promise.resolve();let w=!1;function k(t){v.push(t)}function C(){const t=new Set;do{for(;b.length;){const t=b.shift();m(t),M(t.$$)}for(;g.length;)g.pop()();for(let n=0;n<v.length;n+=1){const e=v[n];t.has(e)||(e(),t.add(e))}v.length=0}while(b.length);for(;y.length;)y.pop()();w=!1}function M(t){if(null!==t.fragment){t.update(),i(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(k)}}const $=new Set;function A(t,n){t&&t.i&&($.delete(t),t.i(n))}const B="undefined"!=typeof window?window:global;function L(t,n){t.d(1),n.delete(t.key)}function I(t,n){-1===t.$$.dirty[0]&&(b.push(t),w||(w=!0,x.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function N(o,s,l,r,c,p,u=[-1]){const d=h;m(o);const f=s.props||{},b=o.$$={fragment:null,ctx:null,props:p,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:e(),dirty:u};let g=!1;b.ctx=l?l(o,f,(t,n,e=n)=>(b.ctx&&c(b.ctx[t],b.ctx[t]=e)&&(b.bound[t]&&b.bound[t](e),g&&I(o,t)),n)):[],b.update(),g=!0,i(b.before_update),b.fragment=!!r&&r(b.ctx),s.target&&(s.hydrate?b.fragment&&b.fragment.l(function(t){return Array.from(t.childNodes)}(s.target)):b.fragment&&b.fragment.c(),s.intro&&A(o.$$.fragment),function(t,e,o){const{fragment:s,on_mount:l,on_destroy:r,after_update:c}=t.$$;s&&s.m(e,o),k(()=>{const e=l.map(n).filter(a);r?r.push(...e):i(e),t.$$.on_mount=[]}),c.forEach(k)}(o,s.target,s.anchor),C()),m(d)}class P{}function H(t,n=null){n||(n=(new Date).toDateString());const e=function(t,n){const e=S(t,n).trim().split("\n").map(t=>t.trim()).map(t=>t.split(":",2)),i={};for(const t of e){let n=t[0].trim();n=n[0].toLowerCase()+n.slice(1);const e=t[1].trim();i[n]=e}return i}(t,"Patient");return{name:e.name,age:e.age,gender:e.gender,vitals:new Map([[n,V(t)]]),ios:new Map([[n,G(t)]]),medications:E(t),labs:q(t),imaging:void 0}}function S(t,n){const e="\n<<"+n+">>\n",i="\n<</"+n+">>\n",a=t.indexOf(e)+e.length,o=t.indexOf(i,a);return t.slice(a,o)}const R=/^•\s+(.*?)\t(.*?)\t(.*?)\t(.*?)$/gm;function E(t){const n=S(t,"HomeMeds");if(!n)return[];const e=n.matchAll(R);return Array.from(e,t=>({name:t[1].toLowerCase(),dose:t[2],route:t[3].toLowerCase(),frequency:t[4].toLowerCase()}))}function _(t){const n=t.map(t=>t[1].trim()),e=n[n.length-1];return n.sort((t,n)=>parseInt(t)-parseInt(n)),{current:e,min:n[0],max:n[n.length-1]}}const D=/\d+(\.\d+)?/;function O(t){const n=t.match(D);return n?n[0]:null}function T(t,n){const e=t.map(t=>t[n]).map(O).map(parseFloat).filter(t=>!isNaN(t));return{current:e[e.length-1],min:e.length>0?Math.min(...e):void 0,max:e.length>0?Math.max(...e):void 0}}function U(t){return t.current||t.min||t.max?t:null}function V(t){const n=S(t,"Vitals");if(!n)return null;let e=n.trim().split(/\r?\n/);return e.shift(),e=e.map(t=>t.split("\t")),console.log(e),{bp:U(_(e)),temp:U(T(e,2)),hr:U(T(e,4)),rr:U(T(e,5)),spo2:U(T(e,6))}}const j=/Intake\/Output Summary([\s\S]*?)\n\W+\n/i;function F(t,n){const e=t.match(n);return e?parseInt(e[1]):void 0}function G(t){const n=S(t,j);return n?{in:F(n,/Intake\s+(-?\d+)/i),out:F(n,/Output\s+(-?\d+)/i),net:F(n,/Net\s+(-?\d+)/i)}:null}const J=/^(.+)\n\tCollection Time:\s+(.+)$/gim,W=/^.+\n\tCollection Time:\s+.+$/gim;function q(t){let n=S(t,"Labs");if(!n)return[];let e=Array.from(n.matchAll(J)),i=n.split(W);return i.shift(),e.map((t,n)=>[t,i[n]]).flatMap(([t,n])=>{let[,e,i]=t;console.log(i),console.log(n);let a=function(t,n){let e=n.trim().split("\n");"Result\tValue\tRef Range"===e[0]&&e.shift();return"surgical pathology"===(t=t.toLowerCase())?[]:t.startsWith("ekg 12 lead")?[]:(console.log(e),e.map(K))}(e,n),o=new Date(i).toDateString();for(const t of a)t.date=o;return a}).groupBy("date")}Array.prototype.groupBy=function(t){const n=new Map;for(const e of this){let i=e[t];n.has(i)||n.set(i,[]),n.get(i).push(e)}return n};const z=/^(<|>)?\s*(\d+(?:\.\d+)?)(?:\s+\((H|L)\))?/i;function K(t){let[n,e]=t.trim().split("\t");n=n;const i=e.match(z);if(i){let[,t,e,a]=i;return t&&(e=t+" "+e),{name:n,value:e,abnormality:a}}return{name:n,value:e}}function Q(t,n){let e="",i=t;e+='<article class="patient"> <h2 class="patient-name">',e+=i.name,e+='</h2> <span class="patient-age">',e+=i.age,e+='</span> <span class="patient-gender">',e+=i.gender,e+='</span> <div class="patient-info"> <section class="patient-vitals"> <h3>Vitals</h3> <table> <tr><th>Date</th><th>Temp</th><th>RR</th><th>HR</th><th>BP</th></tr> ';for(const[t,a]of i.vitals)e+=" <tr> <td>",e+=n.date(t),e+="</td> <td>",a.temp&&(e+=a.temp.current,e+="°F (",e+=a.temp.min,e+="°F - ",e+=a.temp.max,e+="°F)"),e+="</td> <td>",a.rr&&(e+=a.rr.current,e+=" (",e+=a.rr.min,e+=" - ",e+=a.rr.max,e+=")"),e+="</td> <td>",a.hr&&(e+=a.hr.current,e+=" (",e+=a.hr.min,e+=" - ",e+=a.hr.max,e+=")"),e+="</td> <td>",a.bp&&(e+=a.bp.current,e+=" (",e+=a.bp.min,e+=" - ",e+=a.bp.max,e+=")"),e+="</td> </tr> ";e+=" </table> <h3>Inputs/Outputs</h3> <table> <tr><th>Date</th><th>In</th><th>Out</th><th>Net</th></tr> ";for(const[t,a]of i.ios)e+=" <tr> <td>",e+=n.date(t),e+="</td> <td>",a.in&&(e+=a.in,e+=" mL"),e+="</td> <td>",a.out&&(e+=a.out,e+=" mL"),e+="</td> <td>",a.net&&(e+=a.net,e+=" mL"),e+="</td> </tr> ";e+=' </table> </section> <section class="patient-labs"> <h3>Labs</h3> <ul> ';for(const[a,o]of i.labs){e+=' <li> <h4 class="patient-labs-date">',e+=n.date(a),e+="</h4> ",i=o,e+=" ",e+='<div class="patient-labs-boxes"> <div class="patient-labs-bmp"> <svg viewBox="0 0 1 1" preserveAspectRatio="none"> <line x1="0" y1="0.5" x2="0.75" y2="0.5" stroke="black" stroke-width="0.018" /> <line x1="0.275" y1="0" x2="0.275" y2="1" stroke="black" stroke-width="0.0065" /> <line x1="0.55" y1="0" x2="0.55" y2="1" stroke="black" stroke-width="0.0065" /> <line x1="0.75" y1="0.5" x2="0.975" y2="0.1" stroke="black" stroke-width="0.0065" /> <line x1="0.75" y1="0.5" x2="0.975" y2="0.9" stroke="black" stroke-width="0.0065" /> </svg> <table> ';n.bmp(i,a);i=n.bmp(i,a),e+=" <tr> <td>",i.na&&(e+=i.na),e+="</td> <td>",i.cl&&(e+=i.cl),e+="</td> <td>",i.bun&&(e+=i.bun),e+='</td> <td rowspan="2">',i.glu&&(e+=i.glu),e+="</td> </tr> <tr> <td>",i.k&&(e+=i.k),e+="</td> <td>",i.hco3&&(e+=i.hco3),e+="</td> <td>",i.cr&&(e+=i.cr),e+="</td> </tr> ",i=o,e+=' </table> </div> <div class="patient-labs-cbc"> <svg viewBox="0 0 1 1" preserveAspectRatio="none"> <line x1="0" y1="0" x2="1" y2="1" stroke="black" stroke-width="0.0125" /> <line x1="0" y1="1" x2="1" y2="0" stroke="black" stroke-width="0.0125" /> </svg> ';n.cbc(i,a);i=n.cbc(i,a),e+=" <div>",i.hgb&&(e+=i.hgb),e+="</div> <div>",i.wbc&&(e+=i.wbc),e+="</div><div>",i.plt&&(e+=i.plt),e+="</div> <div>",i.hct&&(e+=i.hct),e+="</div> ",i=o,e+=" </div> </div>",e+=" ",i=t,e+=" </li> "}e+=' </ul> </section> <section class="patient-labs-list"> <h3>Labs</h3> <ul> ';for(const[a,o]of i.labs){e+=" ";for(const t of n.listableLabs(o))i=t,e+=" <li> <span>",e+=n.date(a),e+="</span> <span>",e+=i.name,e+="</span> <span>",e+=i.value,e+="</span> </li> ";i=t,e+=" "}e+=' </ul> </section> <section class="patient-medications"> <h3>Medications</h3> <ul> ';for(const t of i.medications)i=t,e+=" <li> ",i.isNew&&(e+=' <span class="patient-medication-started">+</span> '),e+=" ",i.isDiscontinued&&(e+=' <span class="patient-medication-stopped">&minus;</span> '),e+=" ",e+=i.name,e+=" ",e+=i.dose,e+=" ",e+=i.route,e+=" ",e+=i.frequency,e+=" </li> ";return i=t,e+=" </ul> </section> </div> </article> ",e}function X(t,n){t.sort((t,n)=>n-t);const e=t.find(t=>t.name==n);return e?e.value:e}function Y(t){return{na:X(t,"Sodium"),k:X(t,"Potassium"),cl:X(t,"Chloride"),hco3:X(t,"Bicarbonate")||X(t,"Carbon Dioxide"),bun:X(t,"BUN"),cr:X(t,"Creatinine"),glu:X(t,"Glucose")}}function Z(t){return{wbc:X(t,"WBC"),hgb:X(t,"Hemoglobin"),hct:X(t,"Hematocrit"),plt:X(t,"Platelet Count")}}const tt=["WBC","RBC","Hemoglobin","Hematocrit","MCV","MCH","MCHC","RDW","Platelet Count","MPV","Sodium","Potassium","Chloride","Bicarbonate","Carbon Dioxide","BUN","Creatinine","Glucose","Neutrophils Absolute","Lymphocytes Absolute","Monocytes Absolute","Basophils Absolute","Eosinophils Absolute","Neutrophils","Lymphocytes","Monocytes","Basophils","Eosinophils","Platelet Estimate","RBC Morphology Status","Neutrophils Absolute - Instrument","Lymphocytes Absolute - Instrument","Monocytes Absolute - Instrument","Eosinophils Absolute - Instrument","Basophils Absolute - Instrument","Neutrophils Percent - Instrument","Lymphocytes Percent - Instrument","Monocytes Percent - Instrument","Eosinophils Percent - Instrument","Basophils Percent - Instrument","EGFR, African American","EGFR, Non African American","Color","Clarity/Appearance","Specific Gravity","pH","Glucose, UA","Protein","Ketones","Bilirubin, Urine","Urobilinogen, UA","Blood"];function nt(t){return!tt.includes(t.name)}function et(t){return t.filter(nt)}const{document:it,window:at}=B;function ot(t,n,e){const i=t.slice();return i[13]=n[e],i}function st(t,n){let e,a,o,h,m,b,g,v,y,x,w=n[13].name+"";return{key:t,first:null,c(){e=c("li"),a=c("span"),o=p(w),h=u(),m=c("textarea"),b=p("\n\t\tLabs\n\t\t"),g=c("div"),v=c("button"),v.innerHTML='<svg alt="Delete" class="icon svelte-1afdpfu" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>',f(a,"class","patient-name svelte-1afdpfu"),f(m,"placeholder","Update"),f(m,"class","svelte-1afdpfu"),f(v,"class","svelte-1afdpfu"),f(g,"class","controls svelte-1afdpfu"),f(e,"data-patient-id",y=n[13].id),f(e,"class","svelte-1afdpfu"),x=[d(m,"change",n[3]),d(v,"click",n[4])],this.first=e},m(t,n){l(t,e,n),s(e,a),s(a,o),s(e,h),s(e,m),s(e,b),s(e,g),s(g,v)},p(t,n){1&n&&w!==(w=t[13].name+"")&&function(t,n){n=""+n,t.data!==n&&(t.data=n)}(o,w),1&n&&y!==(y=t[13].id)&&f(e,"data-patient-id",y)},d(t){t&&r(e),i(x)}}}function lt(n){let e,a,o,p,h,m,b,g,v,y,x,w,k,C,M,$,B,I,N,P,H,S=[],R=new Map,E=n[0];const _=t=>t[13].id;for(let t=0;t<E.length;t+=1){let e=ot(n,E,t),i=_(e);R.set(i,S[t]=st(i,e))}return{c(){e=c("link"),a=c("style"),a.textContent=".printable-patient-list {\n\t\t\tfont-size: 14px;\n\t\t\tfont-family: sans-serif;\n\t\t}\n\n\t\t.printable-patient-list .patient-info > section,\n\t\t.printable-patient-list > .patient > h2 {\n\t\t\tpadding: 0 2rem;\n\t\t}\n\n\t\t.printable-patient-list .patient-info {\n\t\t\tdisplay: grid;\n\t\t\tgrid-template: 50% 50% / 32% 32% 32%;\n\t\t\tgrid-column-gap: 2%;\n\t\t\tcolumn-rule: 1px dashed #ccc;\n\t\t}\n\n\t\t.printable-patient-list .patient-labs ul {\n\t\t\tpadding: 0;\n\t\t\tlist-style-type: none;\n\t\t}\n\n\t\t.patient-labs-boxes {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-around;\n\t\t}\n\n\t\t.printable-patient-list .patient-labs-cbc {\n\t\t\tline-height: 1.35;\n\t\t}\n\n\t\t.printable-patient-list .patient-medications ul {\n\t\t\tpadding-left: 1em;\n\t\t}\n\n\t\t.printable-patient-list > .patient > .patient-name {\n\t\t\tcolumn-span: all;\n\t\t}\n\n\t\t.printable-patient-list .patient-info > .patient-vitals {\n\t\t\tgrid-area: 1 / 1 / 2 / 2;\n\t\t}\n\n\t\t.printable-patient-list .patient-info > .patient-labs {\n\t\t\tgrid-area: 1 / 2 / 2 / 4;\n\t\t\tcolumn-count: 2;\n\t\t\tcolumn-fill: auto;\n\t\t}\n\n\t\t.printable-patient-list .patient-info > .patient-labs-list {\n\t\t\tgrid-area: 2 / 1 / 3 / 3;\n\t\t\tcolumn-count: 2;\n\t\t\tcolumn-fill: auto;\n\t\t\tfont-size: 0.8em;\n\t\t}\n\n\t\t.printable-patient-list .patient-info > .patient-medications {\n\t\t\tgrid-area: 2 / 3 / 3 / 4;\n\t\t}\n\n\t\t.printable-patient-list table {\n\t\t\tborder-collapse: collapse;\n\t\t}\n\n\t\t.printable-patient-list .patient-vitals table {\n\t\t\twidth: 100%;\n\t\t\ttext-align: center;\n\t\t}\n\n\t\t.printable-patient-list th, .printable-patient-list td {\n\t\t\tborder: 1px solid #ccc;\n\t\t\tpadding: 0.3em;\n\t\t}\n\n\t\t@media print {\n\t\t\t@page {\n\t\t\t\tsize: letter landscape;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\n\t\t\t.patients-editor {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.printable-patient-list .patient-info {\n\t\t\t\tdisplay: grid;\n\t\t\t\tgrid-template: 50vh 50vh / 32% 32% 32%;\n\t\t\t\tgrid-column-gap: 2%;\n\t\t\t\tcolumn-rule: 1px dashed #ccc;\n\t\t\t}\n\n\t\t}\n\n\t\t/** CBC **/\n\n\t\t.patient-labs-cbc {\n\t\t\twidth: 10em;\n\t\t\ttext-align: center;\n\t\t\tposition: relative;\n\t\t\ttop: 0;\n\t\t}\n\n\t\t.patient-labs-cbc > svg {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\twidth: 80%;\n\t\t\tmargin: 0 10%;\n\t\t\theight: 4em;\n\t\t\tvertical-align: middle;\n\t\t}\n\n\t\t.patient-labs-cbc div {\n\t\t\tdisplay: inline-block;\n\t\t}\n\n\t\t.patient-labs-cbc div:nth-of-type(1), .patient-labs-cbc div:nth-of-type(4) {\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t.patient-labs-cbc div:nth-of-type(2) {\n\t\t\twidth: 33%;\n\t\t\tmargin-right: 16.5%;\n\t\t}\n\n\t\t.patient-labs-cbc div:nth-of-type(3) {\n\t\t\twidth: 33%;\n\t\t\tmargin-left: 16.5%;\n\t\t}\n\n\t\t/** BMP **/\n\n\t\t.patient-labs-bmp {\n\t\t\tposition: relative;\n\t\t\ttop: 0;\n\t\t\twidth: 12em;\n\t\t\theight: 4em;\n\t\t\ttext-align: center;\n\t\t}\n\n\t\t.patient-labs-bmp > svg {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 4em;\n\t\t\tmargin: auto;\n\t\t}\n\n\t\t.patient-labs-bmp > table {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tborder-collapse: collapse;\n\t\t}\n\n\t\t.patient-labs-bmp > table td {\n\t\t\twidth: 27.5%;\n\t\t\tborder: none;\n\t\t}\n\n\t\t.patient-labs-bmp > table td:last-child {\n\t\t\tvertical-align: middle;\n\t\t}\n\n\t\t.patient-labs-list > ul {\n\t\t\tmargin-top: 1em;\n\t\t}",o=u(),p=c("div"),h=c("ul");for(let t=0;t<S.length;t+=1)S[t].c();m=u(),b=c("li"),g=c("textarea"),v=u(),y=c("ul"),x=c("li"),w=c("button"),w.innerHTML='<svg alt="Print" class="icon svelte-1afdpfu" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>',k=u(),C=c("li"),M=c("button"),M.innerHTML='<svg alt="Clear" class="icon svelte-1afdpfu" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>',$=u(),B=c("li"),I=c("button"),I.innerHTML='<svg alt="Permalink" class="icon svelte-1afdpfu" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>',N=u(),P=c("div"),f(e,"rel","stylesheet"),f(e,"type","text/css"),f(e,"href","/print.css"),f(g,"placeholder","New Patient"),f(g,"class","svelte-1afdpfu"),f(b,"class","svelte-1afdpfu"),f(h,"class","patients svelte-1afdpfu"),f(w,"class","svelte-1afdpfu"),f(x,"class","svelte-1afdpfu"),f(M,"class","svelte-1afdpfu"),f(C,"class","svelte-1afdpfu"),f(I,"class","svelte-1afdpfu"),f(B,"class","svelte-1afdpfu"),f(y,"class","controls svelte-1afdpfu"),f(p,"class","patients-editor svelte-1afdpfu"),f(P,"class","printable-patient-list"),H=[d(at,"load",n[6]()),d(g,"change",n[2]),d(w,"click",n[1]),d(M,"click",n[1]),d(I,"click",n[5])]},m(t,n){s(it.head,e),s(it.head,a),l(t,o,n),l(t,p,n),s(p,h);for(let t=0;t<S.length;t+=1)S[t].m(h,null);s(h,m),s(h,b),s(b,g),s(p,v),s(p,y),s(y,x),s(x,w),s(y,k),s(y,C),s(C,M),s(y,$),s(y,B),s(B,I),l(t,N,n),l(t,P,n)},p(t,[n]){const e=t[0];S=function(t,n,e,i,a,o,s,l,r,c,p,u){let d=t.length,f=o.length,h=d;const m={};for(;h--;)m[t[h].key]=h;const b=[],g=new Map,v=new Map;for(h=f;h--;){const t=u(a,o,h),l=e(t);let r=s.get(l);r?i&&r.p(t,n):(r=c(l,t),r.c()),g.set(l,b[h]=r),l in m&&v.set(l,Math.abs(h-m[l]))}const y=new Set,x=new Set;function w(t){A(t,1),t.m(l,p),s.set(t.key,t),p=t.first,f--}for(;d&&f;){const n=b[f-1],e=t[d-1],i=n.key,a=e.key;n===e?(p=n.first,d--,f--):g.has(a)?!s.has(i)||y.has(i)?w(n):x.has(a)?d--:v.get(i)>v.get(a)?(x.add(i),w(n)):(y.add(a),d--):(r(e,s),d--)}for(;d--;){const n=t[d];g.has(n.key)||r(n,s)}for(;f;)w(b[f-1]);return b}(S,n,_,1,t,e,R,h,L,st,m,ot)},i:t,o:t,d(t){r(e),r(a),t&&r(o),t&&r(p);for(let t=0;t<S.length;t+=1)S[t].d();t&&r(N),t&&r(P),i(H)}}}let rt=1;const ct=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pt(t){let[n,e,i,a]=t.split(" ");return e=ct.indexOf(e)+1,e.toString()+"/"+i}function ut(t){return parseInt(t.target.closest("li").dataset.patientId)}function dt(t,n,e){let i=[];function a(t){return i.findIndex(n=>n.id==t)}const o={bmp:Y,cbc:Z,date:pt,listableLabs:et};function s(){const t=encodeURIComponent(void JSON.stringify(i.map(t=>t.toJSON())));return window.location.pathname+"#"+t}function l(t){var n;n=decodeURIComponent(t),e(0,i=JSON.parse(n).map(t=>new P(t)))}return[i,function(){let t="";for(let n of i)t+=Q(n,o);document.querySelector(".printable-patient-list").innerHTML=t},function(t){const n=t.target.value;if(0===n.trim().length)return;t.target.value="";const a=H(n);console.log(a),a.id=rt,e(0,i=[...i,a]),rt++},function(t){const n=t.target.value;if(0===n.trim().length)return;t.target.value="";const o=a(ut(t)),s=i.slice();s[o].addDayEntry(H(n)),e(0,i=s)},function(t){const n=a(ut(t));e(0,i=[...i.slice(0,n),...i.slice(n+1)])},function(t){s()},function(t){const n=window.location.hash;n.length>0&&l(n.slice(1))}]}return new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(i(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}{constructor(t){super(),N(this,t,dt,lt,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
